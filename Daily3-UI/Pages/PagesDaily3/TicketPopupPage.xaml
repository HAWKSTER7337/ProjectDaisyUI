<toolkit:Popup xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
               xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
               xmlns:toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
               x:Class="Daily3_UI.Pages.TicketPopupPage">
    <VerticalStackLayout Padding="10">
        <!-- Set the height of the popup to half the screen height using OnPlatform -->
        <VerticalStackLayout HeightRequest="{OnPlatform iOS=400, Android=500}" 
                             HorizontalOptions="FillAndExpand">
            
            <!-- Wrap the ListView inside a ScrollView to make it scrollable -->
            <ScrollView
                VerticalOptions="Fill">
                <ListView x:Name="TicketListView"
                          ItemsSource="{Binding Tickets}"
                          SeparatorVisibility="None">
                    <ListView.ItemTemplate>
                        <DataTemplate>
                            <ViewCell>
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="Auto" />
                                    </Grid.ColumnDefinitions>
                                    <StackLayout Grid.Column="0" Orientation="Vertical">
                                        <Label Text="{Binding TextFormat}"
                                               TextColor="{DynamicResource Primary}" />
                                        <Label Text="{Binding DetailsFormat}"
                                               TextColor="{DynamicResource Primary}" />
                                    </StackLayout>
                                    <Frame Grid.Column="1"
                                           BackgroundColor="{StaticResource DailyRed}"
                                           WidthRequest="60"
                                           HeightRequest="30"
                                           CornerRadius="15"
                                           HorizontalOptions="EndAndExpand"
                                           VerticalOptions="Center"
                                           Padding="0">
                                        <Label Text="Remove"
                                               TextColor="{StaticResource neutral1}"
                                               HorizontalOptions="CenterAndExpand"
                                               VerticalOptions="CenterAndExpand">
                                            <Label.GestureRecognizers>
                                                <TapGestureRecognizer
                                                    Command="{Binding Path=BindingContext.RemoveCommand, Source={x:Reference TicketListView}}"
                                                    CommandParameter="{Binding .}" />
                                            </Label.GestureRecognizers>
                                        </Label>
                                    </Frame>
                                </Grid>
                            </ViewCell>
                        </DataTemplate>
                    </ListView.ItemTemplate>
                </ListView>
            </ScrollView>
            
            <!-- Close button -->
            <Button Text="Close"
                    Command="{Binding CloseCommand}"
                    BackgroundColor="{DynamicResource neutral1}"
                    TextColor="White"
                    BorderWidth="1"
                    CornerRadius="10"
                    Margin="10" />
        </VerticalStackLayout>
    </VerticalStackLayout>
</toolkit:Popup>
